<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Refactored date examples</title>

    <link rel="stylesheet" href="qunit-1.23.1.css" />
    <script src="qunit-1.23.1.js"></script>
    <script src="transactions.js"></script>

    <script>
    test("transactionprocessor", function(assert) {
        
		
		var input = JSON.stringify({transactions : [{ "amount": 17081500, "is-pending": false, "aggregation-time": 1412859120000,
					"account-id": "nonce:comfy-checking/hdhehe", "clear-date": 1412909700000, "transaction-id": "1412909700000", "raw-merchant": "ZENPAYROLL",
					"categorization": "Unknown", "merchant": "Zenpayroll", "transaction-time": "2014-10-09T12:52:00.000Z" }]});
					var output = processTransaction(input);
					var expectedOutput =  JSON.stringify({"2014-9":{income:17081500,spent:0}});
					assert.equal(output,expectedOutput,"Income for 9th October");
					
		

//Add Additional Income for same date
					var input = JSON.stringify({transactions : [{ "amount": 17081500, "is-pending": false, "aggregation-time": 1412859120000,
					"account-id": "nonce:comfy-checking/hdhehe", "clear-date": 1412909700000, "transaction-id": "1412909700000", "raw-merchant": "ZENPAYROLL",
					"categorization": "Unknown", "merchant": "Zenpayroll", "transaction-time": "2014-10-09T12:52:00.000Z" },
					
					{ "amount": 2, "is-pending": false, "aggregation-time": 1412859120000,
					"account-id": "nonce:comfy-checking/hdhehe", "clear-date": 1412909700000, "transaction-id": "1412909700001", "raw-merchant": "ZENPAYROLL",
					"categorization": "Unknown", "merchant": "Zenpayroll", "transaction-time": "2014-10-09T12:52:00.000Z" }
					
					]});
					var output = processTransaction(input);
					var expectedOutput =  JSON.stringify({"2014-9":{income:17081502,spent:0}});
					assert.equal(output,expectedOutput,"Additional Income of 2$ for 9th October");

		
					
					
					
					
					
					var input = JSON.stringify({transactions : [{ "amount": -17081500, "is-pending": false, "aggregation-time": 1412859120000,
					"account-id": "nonce:comfy-checking/hdhehe", "clear-date": 1412909700000, "transaction-id": "1412909700000", "raw-merchant": "ZENPAYROLL",
					"categorization": "Unknown", "merchant": "Zenpayroll", "transaction-time": "2014-10-09T12:52:00.000Z" }]});
					var output = processTransaction(input);
					var expectedOutput =  JSON.stringify({"2014-9":{income:0,spent:17081500}});
					assert.equal(output,expectedOutput,"Income for 9th October");
					
		

//Add Additional Income for same date
					var input = JSON.stringify({transactions : [{ "amount": -17081500, "is-pending": false, "aggregation-time": 1412859120000,
					"account-id": "nonce:comfy-checking/hdhehe", "clear-date": 1412909700000, "transaction-id": "1412909700000", "raw-merchant": "ZENPAYROLL",
					"categorization": "Unknown", "merchant": "Zenpayroll", "transaction-time": "2014-10-09T12:52:00.000Z" },
					
					{ "amount": -2, "is-pending": false, "aggregation-time": 1412859120000,
					"account-id": "nonce:comfy-checking/hdhehe", "clear-date": 1412909700000, "transaction-id": "1412909700001", "raw-merchant": "ZENPAYROLL",
					"categorization": "Unknown", "merchant": "Zenpayroll", "transaction-time": "2014-10-09T12:52:00.000Z" }
					
					]});
					var output = processTransaction(input);
					var expectedOutput =  JSON.stringify({"2014-9":{income:0,spent:17081502}});
					assert.equal(output,expectedOutput,"Additional Income of 2$ for 9th October");
					
					
					//{9-9:{amount:17081500,spent:0}
         //assert.deepEqual(output, {9-9:{amount:17081500,spent:0}});
        /*equal(prettyDate(now, "2008/01/28 22:23:30"), "1 minute ago");
        equal(prettyDate(now, "2008/01/28 21:23:30"), "1 hour ago");
        equal(prettyDate(now, "2008/01/27 22:23:30"), "Yesterday");
        equal(prettyDate(now, "2008/01/26 22:23:30"), "2 days ago");
        equal(prettyDate(now, "2007/01/26 22:23:30"), undefined);*/
		/*
					{"2014-10": {"spent": "$200.00", "income": "$500.00"},
					"2014-11": {"spent": "$1510.05", "income": "$1000.00"},
...
					"2015-04": {"spent": "$300.00", "income": "$500.00"},
					"average": {"spent": "$750.00", "income": "$950.00"}}*/
    });
    </script>
</head>
<body>
    <div id="qunit"></div>
</body>
</html>